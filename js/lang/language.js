const translations = {
    en: {
        // Site / Nav
        "site.title": "City Events Guide",
        "nav.home": "Home",
        "nav.events": "Events",
        "nav.guide": "Guide",
        "nav.contact": "Contact Us",

        // Featured section
        "featured.title": "Featured Events This Week",

        // Event 1 (Ramadan)
        "featured.event1.title": "Ramadan Celebration in Damascus",
        "featured.event1.text": "Magical Ramadan vibes in Old Damascus, with chanting performances and a nightly market.",
        "featured.event1.imgAlt": "Ramadan Celebration in Damascus",

        // Event 2 (Damascus International Fair)
        "featured.event2.title": "Damascus International Fair",
        "featured.event2.text": "Syriaâ€™s largest economic and cultural event, with international participation and special artistic shows.",
        "featured.event2.imgAlt": "Damascus International Fair",

        // Buttons
        "btn.details": "Details",

        // Team section
        "team.title": "Our Team",
        "team.members": [
            "Ø³Ø¯Ø±Ø§ Ø­Ø±Ø¨ sedra_313693",
            "Ø±Ø§Ù…Ø§ ØºØ¯Ø§Ø±Ø© rama_133388", ,
            "Ø¹Ø¨Ø¯ Ø§Ù„ØºÙ†ÙŠ Ø§Ù„Ø·ÙˆÙŠÙ„ abdalghani_238667",
            "Ø¹Ø¯Ù†Ø§Ù† Ø§Ù„Ù…Ø¨ÙŠØ¶ adnan_291183",
        ],

        // Page title
        "page.index.title": "City Events Guide - Home"
    },

    ar: {
        // Site / Nav
        "site.title": "Ø¯Ù„ÙŠÙ„ ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©",
        "nav.home": "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
        "nav.events": "Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª",
        "nav.guide": "Ø§Ù„Ø¯Ù„ÙŠÙ„",
        "nav.contact": "Ø§ØªØµÙ„ Ø¨Ù†Ø§",

        // Featured section
        "featured.title": "ÙØ¹Ø§Ù„ÙŠØ§Øª Ø¨Ø§Ø±Ø²Ø© Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹",

        // Event 1 (Ramadan)
        "featured.event1.title": "Ø§Ø­ØªÙØ§Ù„ Ø±Ù…Ø¶Ø§Ù† ÙÙŠ Ø¯Ù…Ø´Ù‚",
        "featured.event1.text": "Ø£Ø¬ÙˆØ§Ø¡ Ø±Ù…Ø¶Ø§Ù†ÙŠØ© Ø³Ø§Ø­Ø±Ø© ÙÙŠ Ù‚Ù„Ø¨ Ø¯Ù…Ø´Ù‚ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©ØŒ Ù…Ø¹ Ø¹Ø±ÙˆØ¶ Ø¥Ù†Ø´Ø§Ø¯ ÙˆØ³ÙˆÙ‚ Ø´Ø¹Ø¨ÙŠ Ù„ÙŠÙ„ÙŠ.",
        "featured.event1.imgAlt": "Ø§Ø­ØªÙØ§Ù„ Ø±Ù…Ø¶Ø§Ù† ÙÙŠ Ø¯Ù…Ø´Ù‚",

        // Event 2 (Damascus International Fair)
        "featured.event2.title": "Ù…Ø¹Ø±Ø¶ Ø¯Ù…Ø´Ù‚ Ø§Ù„Ø¯ÙˆÙ„ÙŠ",
        "featured.event2.text": "Ø£ÙƒØ¨Ø± Ø­Ø¯Ø« Ø§Ù‚ØªØµØ§Ø¯ÙŠ ÙˆØ«Ù‚Ø§ÙÙŠ ÙÙŠ Ø³ÙˆØ±ÙŠØ§ØŒ Ø¨Ù…Ø´Ø§Ø±ÙƒØ© Ø¯ÙˆÙ„ÙŠØ© ÙˆØ¹Ø±ÙˆØ¶ ÙÙ†ÙŠØ© Ù…Ù…ÙŠØ²Ø©.",
        "featured.event2.imgAlt": "Ù…Ø¹Ø±Ø¶ Ø¯Ù…Ø´Ù‚ Ø§Ù„Ø¯ÙˆÙ„ÙŠ",

        // Buttons
        "btn.details": "ØªÙØ§ØµÙŠÙ„",

        // Team section
        "team.title": "ÙØ±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„",
        "team.members": [
            "Ø³Ø¯Ø±Ø§ Ø­Ø±Ø¨ sedra_313693",
            "Ø±Ø§Ù…Ø§ ØºØ¯Ø§Ø±Ø© rama_133388", ,
            "Ø¹Ø¨Ø¯ Ø§Ù„ØºÙ†ÙŠ Ø§Ù„Ø·ÙˆÙŠÙ„ abdalghani_238667",
            "Ø¹Ø¯Ù†Ø§Ù† Ø§Ù„Ù…Ø¨ÙŠØ¶ adnan_291183",

        ],

        // Page title
        "page.index.title": "Ø¯Ù„ÙŠÙ„ ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© - Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"
    }
};

const DEFAULT_LANG = "en";

// <html lang> & direction
function applyLangMeta(lang) {
    const isRTL = lang === "ar";
    document.documentElement.lang = lang;
    document.documentElement.dir = isRTL ? "rtl" : "ltr";
    document.documentElement.dataset.lang = lang;
}

// ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù…Ø© [data-key]
function translatePage(lang) {
    const dict = translations[lang] || translations[DEFAULT_LANG];

    // Translate elements with data-key
    document.querySelectorAll("[data-key]").forEach((el) => {
        const key = el.getAttribute("data-key");
        const val = dict[key];
        if (!val) return;

        const attr = el.getAttribute("data-attr");
        if (!attr) {
            el.textContent = val;
        } else {
            attr.split(",").map(a => a.trim()).forEach(a => {
                if (a) el.setAttribute(a, val);
            });
        }
    });

    // ØªØ¹Ø¯ÙŠÙ„ page title
    if (dict["page.index.title"]) document.title = dict["page.index.title"];

    // ğŸŸ¡ Team section translation
    const teamSection = document.getElementById("team");
    if (teamSection) {
        const title = teamSection.querySelector("h2");
        const members = teamSection.querySelectorAll("ul li");
        if (title) title.textContent = dict["team.title"];
        const teamList = dict["team.members"];
        if (Array.isArray(teamList)) {
            teamList.forEach((txt, i) => {
                if (members[i]) members[i].textContent = txt;
            });
        }
    }

    // Highlight language buttons
    const arBtn = document.getElementById("arabicBtn");
    const enBtn = document.getElementById("englishBtn");
    if (arBtn) arBtn.style.outline = lang === "ar" ? "2px solid #6c757d" : "none";
    if (enBtn) enBtn.style.outline = lang === "en" ? "2px solid #6c757d" : "none";
}

// Switch language
function setLanguage(lang) {
    localStorage.setItem("lang", lang);
    applyLangMeta(lang);
    translatePage(lang);
}


document.addEventListener("DOMContentLoaded", () => {
    const saved = localStorage.getItem("lang") || DEFAULT_LANG;
    applyLangMeta(saved);
    translatePage(saved);

    // Ø§Ø²Ø±Ø§Ø± Ø§Ù„Ø§Ø¹Ù„Ø§Ù…
    const ar = document.getElementById("arabicBtn");
    const en = document.getElementById("englishBtn");
    if (ar) ar.addEventListener("click", () => setLanguage("ar"));
    if (en) en.addEventListener("click", () => setLanguage("en"));
});