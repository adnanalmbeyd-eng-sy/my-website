(function() {
    const translations = {
        en: {
            // Page / Site
            "page.events.title": "All Events",
            "site.title": "City Events Guide",

            // Nav
            "nav.home": "Home",
            "nav.events": "Events",
            "nav.guide": "Guide",
            "nav.contact": "Contact Us",

            // Categories section
            "categories.title": "ðŸŽ¯ Choose Event Category",
            "categories.shopping": "ðŸ›ï¸ Shopping",
            "categories.family": "ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ Family",
            "categories.music": "ðŸŽµ Music",
            "categories.sport": "ðŸƒâ€â™‚ï¸ Sport",
            "categories.culture": "ðŸ“š Culture",
            "categories.clear": "Show All Events",

            // Main title
            "allEvents.title": "All Events",

            // Badges
            "badge.family": "Family",
            "badge.culture": "Culture",
            "badge.sport": "Sport",
            "badge.national": "National",
            "badge.music": "Music",

            // Events (titles, texts, image alts)
            "events.ramadan.title": "Ramadan Celebration in Damascus",
            "events.ramadan.text": "Magical Ramadan vibes in Old Damascus, with chanting performances and a nightly market.",
            "events.ramadan.imgAlt": "Ramadan Celebration",

            "events.fair.title": "Damascus International Fair",
            "events.fair.text": "An economic and cultural event with international participation, artistic shows, and diverse pavilions.",
            "events.fair.imgAlt": "Damascus International Fair",

            "events.football.title": "Local Football Match",
            "events.football.text": "A face-off between Al-Wahda and Al-Jaish clubs at Abbasiyyin Stadium.",
            "events.football.imgAlt": "Football Match",

            "events.victory.title": "Victory Day Celebration",
            "events.victory.text": "A grand military parade at Umayyad Square, with patriotic performances and wide public participation.",
            "events.victory.imgAlt": "Victory Day",

            "events.eid.title": "Eid Al-Fitr Celebrations",
            "events.eid.text": "Activities for children, games, and gifts in public parks to celebrate the holiday.",
            "events.eid.imgAlt": "Eid Al-Fitr",

            "events.newyear.title": "New Yearâ€™s Eve Party",
            "events.newyear.text": "A huge music party at the Julia Domna Hotel, with fireworks at midnight.",
            "events.newyear.imgAlt": "New Yearâ€™s Eve",
            // inside translations.en
            "filters.type": "Type",
            "filters.from": "From",
            "filters.to": "To",
            "filters.apply": "Apply",
            "filters.reset": "Reset",

            // Buttons
            "btn.details": "Details",

            // Footer
            "footer.copyPrefix": "Â© 2025 City Events Guide | Contact:",
            "footer.facebook": "Facebook",
            "footer.instagram": "Instagram",
            "footer.privacy": "Privacy Policy"
        },

        ar: {
            // Page / Site
            "page.events.title": "Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª",
            "site.title": "Ø¯Ù„ÙŠÙ„ ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©",

            // Nav
            "nav.home": "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
            "nav.events": "Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª",
            "nav.guide": "Ø§Ù„Ø¯Ù„ÙŠÙ„",
            "nav.contact": "Ø§ØªØµÙ„ Ø¨Ù†Ø§",

            // Categories section
            "categories.title": "ðŸŽ¯ Ø§Ø®ØªØ± ØªØµÙ†ÙŠÙ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª",
            "categories.shopping": "ðŸ›ï¸ ØªØ³ÙˆÙ‚",
            "categories.family": "ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ Ø¹Ø§Ø¦Ù„ÙŠ",
            "categories.music": "ðŸŽµ Ù…ÙˆØ³ÙŠÙ‚Ù‰",
            "categories.sport": "ðŸƒâ€â™‚ï¸ Ø±ÙŠØ§Ø¶Ø©",
            "categories.culture": "ðŸ“š Ø«Ù‚Ø§ÙØ©",
            "categories.clear": "Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª",

            // Main title
            "allEvents.title": "Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª",

            // Badges
            "badge.family": "Ø¹Ø§Ø¦Ù„ÙŠ",
            "badge.culture": "Ø«Ù‚Ø§ÙØ©",
            "badge.sport": "Ø±ÙŠØ§Ø¶Ø©",
            "badge.national": "ÙˆØ·Ù†ÙŠ",
            "badge.music": "Ù…ÙˆØ³ÙŠÙ‚Ù‰",

            // Events (titles, texts, image alts)
            "events.ramadan.title": "Ø§Ø­ØªÙØ§Ù„ Ø±Ù…Ø¶Ø§Ù† ÙÙŠ Ø¯Ù…Ø´Ù‚",
            "events.ramadan.text": "Ø£Ø¬ÙˆØ§Ø¡ Ø±Ù…Ø¶Ø§Ù†ÙŠØ© Ø³Ø§Ø­Ø±Ø© ÙÙŠ Ø¯Ù…Ø´Ù‚ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©ØŒ Ù…Ø¹ Ø¹Ø±ÙˆØ¶ Ø¥Ù†Ø´Ø§Ø¯ ÙˆØ³ÙˆÙ‚ Ø´Ø¹Ø¨ÙŠ Ù„ÙŠÙ„ÙŠ.",
            "events.ramadan.imgAlt": "Ø§Ø­ØªÙØ§Ù„ Ø±Ù…Ø¶Ø§Ù†",

            "events.fair.title": "Ù…Ø¹Ø±Ø¶ Ø¯Ù…Ø´Ù‚ Ø§Ù„Ø¯ÙˆÙ„ÙŠ",
            "events.fair.text": "Ø­Ø¯Ø« Ø§Ù‚ØªØµØ§Ø¯ÙŠ ÙˆØ«Ù‚Ø§ÙÙŠ Ø¨Ù…Ø´Ø§Ø±ÙƒØ© Ø¯ÙˆÙ„ÙŠØ©ØŒ Ø¹Ø±ÙˆØ¶ ÙÙ†ÙŠØ©ØŒ ÙˆØ£Ø¬Ù†Ø­Ø© Ù…ØªÙ†ÙˆØ¹Ø©.",
            "events.fair.imgAlt": "Ù…Ø¹Ø±Ø¶ Ø¯Ù…Ø´Ù‚ Ø§Ù„Ø¯ÙˆÙ„ÙŠ",

            "events.football.title": "Ù…Ø¨Ø§Ø±Ø§Ø© ÙƒØ±Ø© Ù‚Ø¯Ù… Ù…Ø­Ù„ÙŠØ©",
            "events.football.text": "Ù…ÙˆØ§Ø¬Ù‡Ø© Ø¨ÙŠÙ† Ù†Ø§Ø¯ÙŠÙŠ Ø§Ù„ÙˆØ­Ø¯Ø© ÙˆØ§Ù„Ø¬ÙŠØ´ Ø¹Ù„Ù‰ Ø£Ø±Ø¶ Ù…Ù„Ø¹Ø¨ Ø§Ù„Ø¹Ø¨Ø§Ø³ÙŠÙŠÙ†.",
            "events.football.imgAlt": "Ù…Ø¨Ø§Ø±Ø§Ø© ÙƒØ±Ø© Ù‚Ø¯Ù…",

            "events.victory.title": "Ø§Ø­ØªÙØ§Ù„ Ø¹ÙŠØ¯ Ø§Ù„Ù†ØµØ±",
            "events.victory.text": "Ø¹Ø±Ø¶ Ø¹Ø³ÙƒØ±ÙŠ Ù…Ù‡ÙŠØ¨ ÙÙŠ Ø³Ø§Ø­Ø© Ø§Ù„Ø£Ù…ÙˆÙŠÙŠÙ†ØŒ Ù…Ø¹ ÙÙ‚Ø±Ø§Øª ÙÙ†ÙŠØ© ÙˆØ·Ù†ÙŠØ© ÙˆÙ…Ø´Ø§Ø±ÙƒØ© Ø´Ø¹Ø¨ÙŠØ© ÙˆØ§Ø³Ø¹Ø©.",
            "events.victory.imgAlt": "Ø¹ÙŠØ¯ Ø§Ù„Ù†ØµØ±",

            "events.eid.title": "Ø§Ø­ØªÙØ§Ù„Ø§Øª Ø¹ÙŠØ¯ Ø§Ù„ÙØ·Ø±",
            "events.eid.text": "ÙØ¹Ø§Ù„ÙŠØ§Øª Ù„Ù„Ø£Ø·ÙØ§Ù„ØŒ Ø£Ù„Ø¹Ø§Ø¨ØŒ ÙˆÙ‡Ø¯Ø§ÙŠØ§ ÙÙŠ Ø§Ù„Ø­Ø¯Ø§Ø¦Ù‚ Ø§Ù„Ø¹Ø§Ù…Ø© Ø¨Ù…Ù†Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹ÙŠØ¯.",
            "events.eid.imgAlt": "Ø¹ÙŠØ¯ Ø§Ù„ÙØ·Ø±",

            "events.newyear.title": "Ø³Ù‡Ø±Ø© Ø±Ø£Ø³ Ø§Ù„Ø³Ù†Ø©",
            "events.newyear.text": "Ø­ÙÙ„Ø© Ù…ÙˆØ³ÙŠÙ‚ÙŠØ© Ø¶Ø®Ù…Ø© ÙÙŠ ÙÙ†Ø¯Ù‚ Ø¬ÙˆÙ„ÙŠØ§ Ø¯ÙˆÙ…Ù†Ø§ØŒ Ù…Ø¹ Ø¹Ø±ÙˆØ¶ Ø£Ù„Ø¹Ø§Ø¨ Ù†Ø§Ø±ÙŠØ© Ø¹Ù†Ø¯ Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„.",
            "events.newyear.imgAlt": "Ø³Ù‡Ø±Ø© Ø±Ø£Ø³ Ø§Ù„Ø³Ù†Ø©",
            // inside translations.ar

            "filters.type": "Ø§Ù„Ù†ÙˆØ¹",
            "filters.from": "Ù…Ù†",
            "filters.to": "Ø¥Ù„Ù‰",
            "filters.apply": "ØªØ·Ø¨ÙŠÙ‚",
            "filters.reset": "Ø¥Ø¹Ø§Ø¯Ø©",
            // Buttons
            "btn.details": "ØªÙØ§ØµÙŠÙ„",

            // Footer
            "footer.copyPrefix": "Â© 2025 Ø¯Ù„ÙŠÙ„ ÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© | Ù„Ù„ØªÙˆØ§ØµÙ„:",
            "footer.facebook": "ÙÙŠØ³Ø¨ÙˆÙƒ",
            "footer.instagram": "Ø¥Ù†Ø³ØªØºØ±Ø§Ù…",
            "footer.privacy": "Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©"
        }
    };

    const DEFAULT_LANG = "ar";

    function applyLangMeta(lang) {
        const isRTL = lang === "ar";
        document.documentElement.lang = lang;
        document.documentElement.dir = isRTL ? "rtl" : "ltr";
        document.documentElement.dataset.lang = lang;
    }

    // ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙŠ ØªØ­ÙˆÙŠ [data-key]
    // ØªØ±Ø¬Ù…Ø© Ø®ØµØ§Ø¦Øµ Ù…Ø«Ù„  data-attr="alt,placeholder,title"
    function translatePage(lang) {
        const dict = translations[lang] || translations[DEFAULT_LANG];

        document.querySelectorAll("[data-key]").forEach((el) => {
            const key = el.getAttribute("data-key");
            const val = dict[key];
            if (typeof val === "undefined") return;

            const attrList = (el.getAttribute("data-attr") || "").split(",").map(s => s.trim()).filter(Boolean);
            if (attrList.length === 0) {
                el.textContent = val;
            } else {
                attrList.forEach((attr) => el.setAttribute(attr, val));
            }
        });

        // Update <title> if it holds a key
        const titleEl = document.querySelector("title[data-key]");
        if (titleEl) {
            const k = titleEl.getAttribute("data-key");
            if (dict[k]) titleEl.textContent = dict[k];
        }

        //Ø¹Ù…Ù„ focus Ø¹Ù„Ù‰ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        const arBtn = document.getElementById("arabicBtn");
        const enBtn = document.getElementById("englishBtn");
        if (arBtn) arBtn.style.outline = lang === "ar" ? "2px solid #6c757d" : "none";
        if (enBtn) enBtn.style.outline = lang === "en" ? "2px solid #6c757d" : "none";
    }

    function setLanguage(lang) {
        localStorage.setItem("lang", lang);
        applyLangMeta(lang);
        translatePage(lang);
    }

    document.addEventListener("DOMContentLoaded", function() {
        const saved = localStorage.getItem("lang") || DEFAULT_LANG;
        applyLangMeta(saved);
        translatePage(saved);

        const ar = document.getElementById("arabicBtn");
        const en = document.getElementById("englishBtn");
        if (ar) ar.addEventListener("click", () => setLanguage("ar"));
        if (en) en.addEventListener("click", () => setLanguage("en"));
    });
})();